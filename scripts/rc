#!/bin/sh

# Usage: ./manage-services.sh start|stop|restart|status service1 service2 ...

action=${1:-start}  # default to start if no action given
shift                # remove first argument, leaving the services

if [ $# -eq 0 ]; then
    echo "Usage: $0 start|stop|restart|status service1 [service2 ...]"
    exit 1
fi

for service in "$@"; do
    case "$action" in
        start)
            if rc-service "$service" status >/dev/null 2>&1; then
                echo "$service is already running, skipping start."
            else
                echo "Starting $service..."
                rc-service "$service" start
            fi
            ;;
        stop)
            echo "Stopping $service..."
            rc-service "$service" stop
            ;;
        restart)
            echo "Restarting $service..."
            rc-service "$service" restart
            ;;
	reload)
            echo "Reloading $service..."
            rc-service "$service" reload
            ;;
        status)
            rc-service "$service" status
            ;;
        *)
            echo "Unknown action: $action"
            echo "Usage: $0 start|stop|restart|status service1 [service2 ...]"
            exit 1
            ;;
    esac
done
